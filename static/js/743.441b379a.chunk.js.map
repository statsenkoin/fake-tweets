{"version":3,"file":"static/js/743.441b379a.chunk.js","mappings":"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","sources":["services/usersApi.js","services/localStorageService .js","pages/Users/Users.styled.jsx","pages/Users/Users.jsx"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://6421e46c86992901b2be8a71.mockapi.io/users';\n// axios.defaults.params = { limit: 3 };\nconst perPage = 3;\n\nexport async function fetchUsers(page) {\n  const response = await axios.get(`?page=${page}&limit=${perPage}`);\n  return response.data;\n}\n\nexport async function updateUser({ id, followers }) {\n  await axios.put(`/${id}`, { followers });\n}\n","export const localStorageService = {\n  save(key, value) {\n    try {\n      localStorage.setItem(key, JSON.stringify(value));\n    } catch (error) {\n      console.error('Local storage set error: ', error.message);\n    }\n  },\n\n  load(key) {\n    try {\n      const data = localStorage.getItem(key);\n      return data === null ? [] : JSON.parse(data);\n    } catch (error) {\n      console.error('Local storage get error: ', error.message);\n    }\n  },\n};\n","import styled from 'styled-components';\n\nexport const PageWrapper = styled.main`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-width: 800px;\n  gap: 24px;\n  margin-left: auto;\n  margin-right: auto;\n  padding-inline: 24px;\n  padding-bottom: 24px;\n`;\n\nexport const PageTab = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  padding: 12px 24px;\n  border-bottom: 1px solid #888;\n`;\n","import { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { fetchUsers, updateUser } from 'services/usersApi';\nimport { localStorageService as storage } from 'services/localStorageService ';\nimport { BackLink, Filter, UsersList } from 'components';\nimport { Button } from 'components/Button/Button.styled';\nimport { PageWrapper, PageTab } from './Users.styled';\n\nexport default function Users() {\n  const [page, setPage] = useState(1);\n  const [users, setUsers] = useState([]);\n  const [followingUsers, setFollowingUsers] = useState(\n    storage.load('followingUsers') ?? []\n  );\n  const [isBtnLoadMore, setIsBtnLoadMore] = useState(true);\n  const [filter, setFilter] = useState('all');\n\n  const location = useLocation();\n  const backLinkHref = location.state?.from ?? '/';\n\n  useEffect(\n    () => storage.save('followingUsers', followingUsers),\n    [followingUsers]\n  );\n\n  useEffect(() => {\n    async function getUsers() {\n      try {\n        const userList = await fetchUsers(page);\n        userList.length > 0\n          ? setUsers(prev => [...prev, ...userList])\n          : setIsBtnLoadMore(false);\n      } catch (error) {\n        console.log('error :>> ', error);\n      }\n    }\n    getUsers();\n  }, [page]);\n\n  const handleFollowingButton = user => {\n    const index = users.findIndex(({ id }) => user.id === id);\n    const isFollowingUser = followingUsers.some(({ id }) => user.id === id);\n    if (isFollowingUser) {\n      users[index].followers -= 1;\n      setFollowingUsers(followingUsers.filter(({ id }) => id !== user.id));\n    } else {\n      users[index].followers += 1;\n      setFollowingUsers(prev => [...prev, user]);\n    }\n    updateFollowers(user);\n  };\n\n  async function updateFollowers(user) {\n    try {\n      await updateUser(user);\n    } catch (error) {\n      console.log('error :>> ', error);\n    }\n  }\n\n  const handleLoadMore = () => setPage(prev => prev + 1);\n\n  const filterOption = value => setFilter(value);\n\n  const filteredUserList = () => {\n    const ids = followingUsers.map(({ id }) => id);\n    switch (filter) {\n      case 'follow':\n        return users.filter(({ id }) => !ids.includes(id));\n      case 'followings':\n        return users.filter(({ id }) => ids.includes(id));\n      default:\n        return users;\n    }\n  };\n\n  return (\n    <PageWrapper>\n      <PageTab>\n        <BackLink to={backLinkHref}>Back Home</BackLink>\n        <Filter filterOption={filterOption} />\n      </PageTab>\n      <UsersList\n        filteredUserList={filteredUserList}\n        followingUsers={followingUsers}\n        handleFollowingButton={handleFollowingButton}\n      />\n      {isBtnLoadMore && (\n        <Button type=\"button\" onClick={handleLoadMore}>\n          Load more\n        </Button>\n      )}\n    </PageWrapper>\n  );\n}\n"],"names":["axios","fetchUsers","page","response","data","updateUser","id","followers","localStorageService","key","value","localStorage","setItem","JSON","stringify","error","console","message","getItem","parse","PageWrapper","styled","PageTab","Users","useState","setPage","users","setUsers","storage","followingUsers","setFollowingUsers","isBtnLoadMore","setIsBtnLoadMore","filter","setFilter","backLinkHref","useLocation","state","from","useEffect","userList","length","prev","log","getUsers","user","to","filterOption","filteredUserList","ids","map","includes","handleFollowingButton","index","findIndex","some","updateFollowers","type","onClick"],"sourceRoot":""}