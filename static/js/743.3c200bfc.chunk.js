"use strict";(self.webpackChunkfake_tweets=self.webpackChunkfake_tweets||[]).push([[743],{743:function(n,e,t){t.r(e),t.d(e,{default:function(){return U}});var r=t(433),c=t(861),o=t(439),u=t(757),a=t.n(u),i=t(791),s=t(689),l=t(243);l.Z.defaults.baseURL="https://6421e46c86992901b2be8a71.mockapi.io/users";function f(n){return p.apply(this,arguments)}function p(){return(p=(0,c.Z)(a().mark((function n(e){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.Z.get("?page=".concat(e,"&limit=").concat(4));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function d(n){return h.apply(this,arguments)}function h(){return(h=(0,c.Z)(a().mark((function n(e){var t,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.id,r=e.followers,n.next=3,l.Z.put("/".concat(t),{followers:r});case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function g(){return v.apply(this,arguments)}function v(){return(v=(0,c.Z)(a().mark((function n(){var e;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.Z.get();case 2:return e=n.sent,n.abrupt("return",e.data.length);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var w,x,Z=function(n,e){try{localStorage.setItem(n,JSON.stringify(e))}catch(t){console.error("Local storage set error: ",t.message)}},m=function(n){try{var e=localStorage.getItem(n);return null===e?[]:JSON.parse(e)}catch(t){console.error("Local storage get error: ",t.message)}},k=t(643),y=t(624),b=t(168),S=t(444),j=S.ZP.main(w||(w=(0,b.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-width: 784px;\n  gap: 24px;\n  margin-left: auto;\n  margin-right: auto;\n  padding-bottom: 24px;\n"]))),E=S.ZP.div(x||(x=(0,b.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  padding: 12px 24px;\n  border-bottom: 1px solid var(--color-bg-dark-main);\n"]))),L=t(184);function U(){var n,e,t,u=(0,i.useState)(1),l=(0,o.Z)(u,2),p=l[0],h=l[1],v=(0,i.useState)([]),w=(0,o.Z)(v,2),x=w[0],b=w[1],S=(0,i.useState)(null!==(n=m("followingUsers"))&&void 0!==n?n:[]),U=(0,o.Z)(S,2),B=U[0],C=U[1],H=(0,i.useState)(!1),I=(0,o.Z)(H,2),O=I[0],J=I[1],N=(0,i.useState)("all"),P=(0,o.Z)(N,2),R=P[0],_=P[1],z=(0,i.useState)(1),F=(0,o.Z)(z,2),M=F[0],T=F[1],q=(0,i.useState)(1),A=(0,o.Z)(q,2),D=A[0],G=A[1],K=(0,i.useRef)([]),Q=null!==(e=null===(t=(0,s.TH)().state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/";(0,i.useEffect)((function(){return Z("followingUsers",B)}),[B]),(0,i.useEffect)((function(){function n(){return(n=(0,c.Z)(a().mark((function n(){var e;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g();case 3:e=n.sent,G(Y(e)),T(Y(e)),J(!!e),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log("error :>> ",n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[]),(0,i.useEffect)((function(){var n=function(){var n=(0,c.Z)(a().mark((function n(){var e;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("followings"===R){n.next=11;break}return n.prev=1,n.next=4,f(p);case 4:e=n.sent,V(e),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.log("error :>> ",n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(){return n.apply(this,arguments)}}();n()}),[p,R]),(0,i.useEffect)((function(){J(!(p>=M)),p>1&&window.scrollBy(0,window.innerHeight/2)}),[M,p]),(0,i.useEffect)((function(){T("followings"===R?Y(B.length):D)}),[R,B.length,D]);var V=function(n){if("all"===R)b((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(n))}));else if("follow"===R){var e=B.map((function(n){return n.id})),t=n.filter((function(n){var t=n.id;return!e.includes(t)}));K.current=[].concat((0,r.Z)(K.current),(0,r.Z)(t));var c=K.current.length%4;if(c){var o=(0,r.Z)(K.current);o.splice(-c,c),n=o}else n=K.current;p===M&&(n=K.current),K.current.length-x.length<4&&p<M&&$(),b(n)}},W=function(n){var e=x.findIndex((function(e){var t=e.id;return n.id===t})),t=(0,r.Z)(K.current);K.current.splice(e,1);var c=[],o=K.current.length%4,u=(0,r.Z)(K.current);u.splice(-o,o),t.length%4-K.current.length%4<0?V(c):(c=u,p===M&&(c=K.current),b(c))},X=function(){var n=(0,c.Z)(a().mark((function n(e){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d(e);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),console.log("error :>> ",n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(e){return n.apply(this,arguments)}}(),Y=function(n){return Math.ceil(n/4)},$=function(){return h((function(n){return n+1}))};return(0,L.jsxs)(j,{children:[(0,L.jsxs)(E,{children:[(0,L.jsx)(k.hb,{to:Q,children:"Back Home"}),(0,L.jsx)(k.wn,{filterOption:function(n){K.current=[],h(1),b([]),_(n)}})]}),(0,L.jsx)(k.to,{filteredUserList:function(){switch(R){case"followings":return(0,r.Z)(B).splice(0,4*p);case"follow":return K.current;default:return x}},followingUsers:B,handleFollowingButton:function(n){B.some((function(e){var t=e.id;return n.id===t}))?(n.followers-=1,C(B.filter((function(e){return e.id!==n.id})))):(n.followers+=1,C((function(e){return[].concat((0,r.Z)(e),[n])}))),"follow"===R&&W(n),X(n)}}),O&&(0,L.jsx)(y.z,{type:"button",onClick:$,children:"Load more"})]})}}}]);
//# sourceMappingURL=743.3c200bfc.chunk.js.map