{"version":3,"file":"static/js/783.fec0e53f.chunk.js","mappings":"6OAEaA,EAAcC,EAAAA,GAAAA,IAAH,6OAYXC,EAAWD,EAAAA,GAAAA,IAAH,sMAURE,EAAYF,EAAAA,GAAAA,GAAH,2G,2BCtBtBG,EAAAA,EAAAA,SAAAA,QAAyB,oDAIlB,SAAeC,EAAtB,+CAAO,OAAP,oBAAO,WAA0BC,GAA1B,uFACkBF,EAAAA,EAAAA,IAAA,gBAAmBE,EAAnB,kBAHT,IAET,cACCC,EADD,yBAEEA,EAASC,MAFX,kEAKA,SAAeC,EAAtB,+CAAO,OAAP,oBAAO,8FAA4BC,EAA5B,EAA4BA,GAAIC,EAAhC,EAAgCA,UAAhC,SACCP,EAAAA,EAAAA,IAAA,WAAcM,GAAM,CAAEC,UAAAA,IADvB,kE,sBCHQ,SAASC,IAAS,IAAD,IAExBC,EAAY,qBADDC,EAAAA,EAAAA,MACaC,aAAZ,aAAG,EAAgBC,YAAnB,QAA2B,IAG7C,GAAwBC,EAAAA,EAAAA,UAAS,GAAjC,eAAOX,EAAP,KAAaY,EAAb,KACA,GAA0BD,EAAAA,EAAAA,UAAS,IAAnC,eAAOE,EAAP,KAAcC,EAAd,KACA,GAA4CH,EAAAA,EAAAA,UAAS,IAArD,eAAOI,EAAP,KAAuBC,EAAvB,KACA,GAA0CL,EAAAA,EAAAA,WAAS,GAAnD,eAAOM,EAAP,KAAsBC,EAAtB,MAEAC,EAAAA,EAAAA,YAAU,WAAM,wCACd,6GAE2BpB,EAAWC,GAFtC,QAEUoB,EAFV,QAGaC,OAAS,EACdP,GAAS,SAAAQ,GAAI,wBAAQA,IAAR,OAAiBF,GAAjB,IACbF,GAAiB,GALzB,gDAOIK,QAAQC,IAAI,aAAZ,MAPJ,0DADc,uBAAC,WAAD,wBAWdC,EACD,GAAE,CAACzB,IAEJ,IAAM0B,EAAwB,SAAAC,GAC5B,IAAMC,EAAQf,EAAMgB,WAAU,gBAAGzB,EAAH,EAAGA,GAAH,OAAYuB,EAAKvB,KAAOA,CAAxB,IACNW,EAAee,MAAK,gBAAG1B,EAAH,EAAGA,GAAH,OAAYuB,EAAKvB,KAAOA,CAAxB,KAE1CS,EAAMe,GAAOvB,WAAa,EAC1BW,EAAkBD,EAAegB,QAAO,qBAAG3B,KAAgBuB,EAAKvB,EAAxB,OAExCS,EAAMe,GAAOvB,WAAa,EAC1BW,GAAkB,SAAAM,GAAI,wBAAQA,GAAR,CAAcK,GAAd,KAhCI,oCAkC5BK,CAAgBL,EACjB,EAnC6B,wCAqC9B,WAA+BA,GAA/B,0FAEUxB,EAAWwB,GAFrB,sDAIIJ,QAAQC,IAAI,aAAZ,MAJJ,yDArC8B,sBAgD9B,OACE,2BACE,UAAC9B,EAAD,YACE,UAACE,EAAD,YACE,SAAC,KAAD,CAAUqC,GAAI1B,EAAd,wBACA,yCAEF,SAACV,EAAD,UACGgB,EAAMqB,KAAI,SAAAP,GAAI,OACb,yBACE,SAAC,KAAD,CACEA,KAAMA,EACNZ,eAAgBA,EAChBW,sBAAuBA,KAJlBC,EAAKvB,GADD,MAUhBa,IACC,SAAC,IAAD,CAAQkB,KAAK,SAASC,QAtBP,kBAAMxB,GAAQ,SAAAU,GAAI,OAAIA,EAAO,CAAX,GAAlB,EAsBf,2BAOT,C","sources":["pages/Users/Users.styled.jsx","services/usersApi.js","pages/Users/Users.jsx"],"sourcesContent":["import styled from 'styled-components';\n\nexport const PageWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  padding-inline: 24px;\n  padding-bottom: 24px;\n`;\n\nexport const PageHead = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  padding: 12px 24px;\n  margin-bottom: 24px;\n  border-bottom: 1px solid #888;\n`;\n\nexport const UsersList = styled.ul`\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  margin-bottom: 24px;\n`;\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://6421e46c86992901b2be8a71.mockapi.io/users';\n// axios.defaults.params = { limit: 3 };\nconst perPage = 3;\n\nexport async function fetchUsers(page) {\n  const response = await axios.get(`?page=${page}&limit=${perPage}`);\n  return response.data;\n}\n\nexport async function updateUser({ id, followers }) {\n  await axios.put(`/${id}`, { followers });\n}\n","import { useLocation } from 'react-router-dom';\nimport { PageWrapper, PageHead, UsersList } from './Users.styled';\nimport { BackLink, UserCard } from 'components';\nimport { useEffect, useState } from 'react';\nimport { fetchUsers, updateUser } from 'services/usersApi';\n\nimport { Button } from 'components/Button/Button.styled';\n\nexport default function Users() {\n  const location = useLocation();\n  const backLinkHref = location.state?.from ?? '/';\n\n  // ==================================================\n  const [page, setPage] = useState(1);\n  const [users, setUsers] = useState([]);\n  const [followingUsers, setFollowingUsers] = useState([]);\n  const [isBtnLoadMore, setIsBtnLoadMore] = useState(true);\n\n  useEffect(() => {\n    async function getUsers() {\n      try {\n        const userList = await fetchUsers(page);\n        userList.length > 0\n          ? setUsers(prev => [...prev, ...userList])\n          : setIsBtnLoadMore(false);\n      } catch (error) {\n        console.log('error :>> ', error);\n      }\n    }\n    getUsers();\n  }, [page]);\n\n  const handleFollowingButton = user => {\n    const index = users.findIndex(({ id }) => user.id === id);\n    const isFollowingUser = followingUsers.some(({ id }) => user.id === id);\n    if (isFollowingUser) {\n      users[index].followers -= 1;\n      setFollowingUsers(followingUsers.filter(({ id }) => id !== user.id));\n    } else {\n      users[index].followers += 1;\n      setFollowingUsers(prev => [...prev, user]);\n    }\n    updateFollowers(user);\n  };\n\n  async function updateFollowers(user) {\n    try {\n      await updateUser(user);\n    } catch (error) {\n      console.log('error :>> ', error);\n    }\n  }\n\n  const handleLoadMore = () => setPage(prev => prev + 1);\n\n  // ==================================================\n  return (\n    <main>\n      <PageWrapper>\n        <PageHead>\n          <BackLink to={backLinkHref}>Back Home</BackLink>\n          <span>filter</span>\n        </PageHead>\n        <UsersList>\n          {users.map(user => (\n            <li key={user.id}>\n              <UserCard\n                user={user}\n                followingUsers={followingUsers}\n                handleFollowingButton={handleFollowingButton}\n              ></UserCard>\n            </li>\n          ))}\n        </UsersList>\n        {isBtnLoadMore && (\n          <Button type=\"button\" onClick={handleLoadMore}>\n            Load more\n          </Button>\n        )}\n      </PageWrapper>\n    </main>\n  );\n}\n"],"names":["PageWrapper","styled","PageHead","UsersList","axios","fetchUsers","page","response","data","updateUser","id","followers","Users","backLinkHref","useLocation","state","from","useState","setPage","users","setUsers","followingUsers","setFollowingUsers","isBtnLoadMore","setIsBtnLoadMore","useEffect","userList","length","prev","console","log","getUsers","handleFollowingButton","user","index","findIndex","some","filter","updateFollowers","to","map","type","onClick"],"sourceRoot":""}